language: clojure
lein: 2.9.1
dist: bionic

services:
  - docker

script:
  - ./ext/travisci/install-java.sh
  - ./ext/travisci/test.sh
jobs:
  include:
    - stage: puppetserver tests
      name: "Java 8"
      env:
        - JAVA_VERSION=8
    - name: "Java 11"
      env:
        - JAVA_VERSION=11
    - name: "Java 11 w/ FIPS"
      env:
        - JAVA_VERSION=11
        - ADDITIONAL_LEIN_ARGS="with-profile fips"
    - name: "Java 11 w/ multithreaded"
      env:
        - JAVA_VERSION=11
        - MULTITHREADED=true

notifications:
  email: false
